<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Grades Judo - Version ComplÃ¨te</title>
</head>
<body>
    <h1>ğŸ¥‹ Administration Grades Judo</h1>
    
    <div id="message" style="position: fixed; top: 20px; right: 20px; padding: 1rem; border-radius: 8px; display: none; z-index: 1000;"></div>
    
    <div class="onglets">
        <button class="onglet active" onclick="afficherOnglet('grades')">ğŸ¥‹ Grades</button>
        <button class="onglet" onclick="afficherOnglet('techniques')">ğŸ’ª Techniques</button>
        <button class="onglet" onclick="afficherOnglet('katas')">ğŸ“¿ Katas</button>
        <button class="onglet" onclick="afficherOnglet('philosophie')">ğŸ§  Philosophie</button>
        <button class="onglet" onclick="afficherOnglet('reglement')">ğŸ“‹ RÃ¨glement</button>
        <button class="onglet" onclick="afficherOnglet('nouveautes')">ğŸ”„ NouveautÃ©s</button>
        <button class="onglet" onclick="afficherOnglet('pdf')">ğŸ“„ Documents PDF</button>
        <button class="onglet" onclick="afficherOnglet('sauvegarde')" style="background: #e67e22;">ğŸ’¾ Sauvegarde</button>
    </div>
    
<!-- GRADES - VERSION AMÃ‰LIORÃ‰E -->
<div id="onglet-grades" class="contenu-onglet active">
    <h2>ğŸ¥‹ Gestion des Grades - Sections DÃ©taillÃ©es</h2>
    <p style="color: #666; margin-bottom: 1rem;">Modifiez chaque section de chaque grade individuellement</p>
    
    <div style="margin-bottom: 1.5rem;">
        <label style="display: block; font-weight: bold; margin-bottom: 0.5rem;">ğŸ“‹ SÃ©lectionner un grade :</label>
        <div id="grade-selector" style="display: flex; gap: 0.5rem; flex-wrap: wrap;"></div>
    </div>

    <!-- Section Programme Technique -->
    <div class="section-admin">
        <h3>ğŸ“š Programme Technique</h3>
        <label for="grade-programme">DÃ©crivez le programme technique complet :</label>
        <textarea id="grade-programme" rows="8" placeholder="Ex: UV1 - Kata : Nage-no-kata...&#10;UV2 - Technique : 12 techniques imposÃ©es..."></textarea>
    </div>

    <!-- Section Kata Obligatoire -->
    <div class="section-admin">
        <h3>ğŸ“– Kata Obligatoire</h3>
        <label for="grade-kata">DÃ©tails sur le kata Ã  prÃ©senter :</label>
        <textarea id="grade-kata" rows="6" placeholder="Ex: Nage-no-kata complet (rÃ´le Tori)&#10;Dominante CompÃ©tition : 3 premiÃ¨res sÃ©ries..."></textarea>
    </div>

    <!-- Section Techniques Ã  PrÃ©senter -->
    <div class="section-admin">
        <h3>ğŸ’ª Techniques Ã  PrÃ©senter</h3>
        <label for="grade-techniques">Liste des techniques exigÃ©es :</label>
        <textarea id="grade-techniques" rows="8" placeholder="Ex: 6 techniques Nage-waza imposÃ©es&#10;4 techniques Ne-waza imposÃ©es&#10;2 techniques de dÃ©fense au choix..."></textarea>
    </div>

    <!-- Section Informations ComplÃ©mentaires -->
    <div class="section-admin">
        <h3>â„¹ï¸ Informations ComplÃ©mentaires</h3>
        <label for="grade-infos">Autres informations importantes :</label>
        <textarea id="grade-infos" rows="5" placeholder="Conseils, durÃ©e, critÃ¨res d'Ã©valuation, Ã¢ge minimum..."></textarea>
    </div>
    
    <button onclick="sauvegarderGradeComplet()" class="btn-primary">ğŸ’¾ Sauvegarder tout le grade</button>
</div>
 <!-- TECHNIQUES - VERSION AMÃ‰LIORÃ‰E -->
<div id="onglet-techniques" class="contenu-onglet">
    <h2>ğŸ’ª Gestion des Techniques - Sections DÃ©taillÃ©es</h2>
    
    <div style="margin-bottom: 1.5rem;">
        <label style="display: block; font-weight: bold; margin-bottom: 0.5rem;">ğŸ¯ SÃ©lectionner une catÃ©gorie :</label>
        <div id="technique-selector" style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
            <button onclick="afficherTechnique('1er-dan')" style="background: #3498db;">1er Dan</button>
            <button onclick="afficherTechnique('2eme-dan')" style="background: #3498db;">2Ã¨me Dan</button>
            <button onclick="afficherTechnique('3eme-dan')" style="background: #3498db;">3Ã¨me Dan</button>
            <button onclick="afficherTechnique('4-5-6-dan')" style="background: #3498db;">4-5-6 Dan</button>
            <button onclick="afficherTechnique('20-attaques')" style="background: #e74c3c;">20 Attaques</button>
        </div>
    </div>

    <!-- Section Nage-waza -->
    <div class="section-admin">
        <h3>ğŸŒ€ Nage-waza (Techniques de projection)</h3>
        <label for="tech-nage">Liste et description des techniques Nage-waza :</label>
        <textarea id="tech-nage" rows="8" placeholder="Ex:&#10;TE-WAZA (Techniques de main)&#10;- Seoi-nage&#10;- Kata-guruma&#10;&#10;KOSHI-WAZA (Techniques de hanche)&#10;- O-goshi&#10;- Harai-goshi"></textarea>
    </div>

    <!-- Section Ne-waza -->
    <div class="section-admin">
        <h3>ğŸ”’ Ne-waza (Techniques au sol)</h3>
        <label for="tech-ne">Liste et description des techniques Ne-waza :</label>
        <textarea id="tech-ne" rows="8" placeholder="Ex:&#10;IMMOBILISATIONS&#10;- Kesa-gatame&#10;- Yoko-shiho-gatame&#10;&#10;Ã‰TRANGLEMENTS&#10;- Nami-juji-jime&#10;- Okuri-eri-jime"></textarea>
    </div>

    <!-- Section DÃ©fense/Jujitsu -->
    <div class="section-admin">
        <h3>ğŸ›¡ï¸ DÃ©fense et Jujitsu</h3>
        <label for="tech-defense">Techniques de dÃ©fense Ã  prÃ©senter :</label>
        <textarea id="tech-defense" rows="6" placeholder="Ex:&#10;SÃ©rie B - 2 techniques au choix parmi:&#10;- DÃ©fense contre saisie de poignet&#10;- DÃ©fense contre coup de poing&#10;- DÃ©fense contre Ã©tranglement"></textarea>
    </div>

    <!-- Section Conseils -->
    <div class="section-admin">
        <h3>ğŸ’¡ Conseils et Remarques</h3>
        <label for="tech-conseils">Conseils pour la prÃ©sentation :</label>
        <textarea id="tech-conseils" rows="5" placeholder="Points importants, erreurs Ã  Ã©viter, critÃ¨res d'Ã©valuation..."></textarea>
    </div>
    
    <button onclick="sauvegarderTechniqueComplete()" class="btn-primary">ğŸ’¾ Sauvegarder toutes les sections</button>
</div>
    
<!-- KATAS -->
<div id="onglet-katas" class="contenu-onglet">
    <h2>ğŸ“¿ Gestion des Katas</h2>
    <div style="margin-bottom: 1rem;">
        <button onclick="afficherKata('nage-no-kata')">Nage-no-kata</button>
        <button onclick="afficherKata('katame-no-kata')">Katame-no-kata</button>
        <button onclick="afficherKata('kime-no-kata')">Kime-no-kata</button>
        <button onclick="afficherKata('goshin-jitsu')">Goshin-jitsu</button>
        <button onclick="afficherKata('ju-no-kata')">Ju-no-kata</button>
        <button onclick="afficherKata('itsutsu-no-kata')">Itsutsu-no-kata</button>
        <button onclick="afficherKata('koshiki-no-kata')">Koshiki-no-kata</button>
        <button onclick="afficherKata('gonosen')">Gonosen</button>
    </div>
    <div class="section-admin">
        <h3 id="kata-titre">Kata sÃ©lectionnÃ©</h3>
        <textarea id="kata-text" rows="10" placeholder="DÃ©crivez le kata, ses sÃ©ries, ses techniques..."></textarea>
    </div>
    <button onclick="sauvegarderKata()">ğŸ’¾ Sauvegarder</button>
</div>
    
<!-- PHILOSOPHIE -->
<div id="onglet-philosophie" class="contenu-onglet">
    <h2>ğŸ§  Gestion Philosophie</h2>
    <div style="margin-bottom: 1rem;">
        <button onclick="afficherPhilo('shin-gi-tai')">Shin-Gi-Tai</button>
        <button onclick="afficherPhilo('ethique')">Ã‰thique</button>
        <button onclick="afficherPhilo('principes')">Principes</button>
        <button onclick="afficherPhilo('histoire')">Histoire</button>
    </div>
    <div class="section-admin">
        <h3 id="philo-titre">Section sÃ©lectionnÃ©e</h3>
        <textarea id="philo-text" rows="10" placeholder="Contenu philosophique..."></textarea>
    </div>
    <button onclick="sauvegarderPhilo()">ğŸ’¾ Sauvegarder</button>
</div>
    
<!-- REGLEMENT -->
<div id="onglet-reglement" class="contenu-onglet">
    <h2>ğŸ“‹ Gestion du RÃ¨glement</h2>
    
    <div class="section-admin">
        <h3>ğŸ“œ RÃ¨glement GÃ©nÃ©ral</h3>
        <textarea id="reglement-general" rows="5" placeholder="RÃ¨glement gÃ©nÃ©ral des passages de grades..."></textarea>
        <button onclick="sauvegarderReglementSection('general')">ğŸ’¾ Sauvegarder</button>
    </div>
    
    <div class="section-admin">
        <h3>ğŸ‘” Guide des Juges</h3>
        <textarea id="reglement-juges" rows="5" placeholder="Instructions pour les juges et arbitres..."></textarea>
        <button onclick="sauvegarderReglementSection('juges')">ğŸ’¾ Sauvegarder</button>
    </div>
    
    <div class="section-admin">
        <h3>âœ… CritÃ¨res d'Ã‰valuation</h3>
        <textarea id="reglement-criteres" rows="5" placeholder="CritÃ¨res de notation et d'Ã©valuation..."></textarea>
        <button onclick="sauvegarderReglementSection('criteres')">ğŸ’¾ Sauvegarder</button>
    </div>
    
    <div class="section-admin">
        <h3>âš™ï¸ ProcÃ©dure d'Examen</h3>
        <textarea id="reglement-procedure" rows="5" placeholder="DÃ©roulement de l'examen, procÃ©dures..."></textarea>
        <button onclick="sauvegarderReglementSection('procedure')">ğŸ’¾ Sauvegarder</button>
    </div>
    
    <div class="section-admin">
        <h3>ğŸ”„ NouveautÃ©s RÃ¨glement</h3>
        <textarea id="reglement-nouveautes" rows="5" placeholder="Modifications rÃ©centes du rÃ¨glement..."></textarea>
        <button onclick="sauvegarderReglementSection('nouveautes')">ğŸ’¾ Sauvegarder</button>
    </div>
</div>
    
<!-- NOUVEAUTES -->
<div id="onglet-nouveautes" class="contenu-onglet">
    <h2>ğŸ”„ NouveautÃ©s</h2>
    
    <div class="section-admin">
        <h3>NouveautÃ© 1</h3>
        <input type="text" id="nouveaute-1" placeholder="Titre de la nouveautÃ© 1">
        <textarea id="description-1" rows="3" placeholder="Description..."></textarea>
    </div>
    
    <div class="section-admin">
        <h3>NouveautÃ© 2</h3>
        <input type="text" id="nouveaute-2" placeholder="Titre de la nouveautÃ© 2">
        <textarea id="description-2" rows="3" placeholder="Description..."></textarea>
    </div>
    
    <button onclick="sauvegarderNouveautes()">ğŸ’¾ Sauvegarder</button>
</div>
    
<!-- PDF -->
<div id="onglet-pdf" class="contenu-onglet">
    <h2>ğŸ“„ Gestion des Documents PDF</h2>
    <p style="color: #666;">Uploadez des PDF qui seront visibles sur la page Documents</p>
    
    <div style="border: 2px dashed #3498db; padding: 2rem; margin: 1rem 0; border-radius: 8px; background: #f8f9fa;">
        <h3 style="margin-top: 0;">ğŸ“¤ Ajouter un nouveau document</h3>
        
        <label style="display: block; margin-top: 1rem; font-weight: bold;">ğŸ“„ Fichier PDF :</label>
        <input type="file" id="pdf-upload" accept=".pdf" style="margin: 0.5rem 0; padding: 0.5rem;">
        
        <label style="display: block; margin-top: 1rem; font-weight: bold;">ğŸ“ Titre du document :</label>
        <input type="text" id="pdf-titre" placeholder="Ex: RÃ¨glement 2025" 
               style="width: 100%; padding: 0.75rem; margin: 0.5rem 0; border: 2px solid #ddd; border-radius: 6px;">
        
        <label style="display: block; margin-top: 1rem; font-weight: bold;">ğŸ“‹ Description :</label>
        <textarea id="pdf-description" placeholder="Description du document..." rows="3"
                  style="width: 100%; padding: 0.75rem; margin: 0.5rem 0; border: 2px solid #ddd; border-radius: 6px;"></textarea>
        
        <label style="display: block; margin-top: 1rem; font-weight: bold;">ğŸ—‚ï¸ CatÃ©gorie :</label>
        <select id="pdf-categorie" style="width: 100%; padding: 0.75rem; margin: 0.5rem 0; border: 2px solid #ddd; border-radius: 6px;">
            <option value="reglement-general">ğŸ“œ RÃ¨glement GÃ©nÃ©ral</option>
            <option value="juges-arbitres">ğŸ‘” Juges & Arbitres</option>
            <option value="criteres-notation">âœ… CritÃ¨res de Notation</option>
            <option value="procedures">âš™ï¸ ProcÃ©dures</option>
            <option value="nouveautes">â­ NouveautÃ©s</option>
            <option value="autres">ğŸ“ Autres</option>
        </select>
        
        <button onclick="uploaderPDF()" style="background: #27ae60; margin-top: 1rem; padding: 1rem 2rem; font-size: 1.1rem;">
            ğŸ“¤ Uploader le Document
        </button>
    </div>
    
    <div id="liste-pdf" style="margin-top: 2rem;"></div>
</div>
    
<!-- SAUVEGARDE -->
<div id="onglet-sauvegarde" class="contenu-onglet">
    <h2>ğŸ’¾ Sauvegarde et Restauration</h2>
    <p style="color: #666; margin-bottom: 2rem;">ProtÃ©gez vos donnÃ©es en crÃ©ant des sauvegardes complÃ¨tes</p>
    
    <div style="background: #d4edda; border: 2px solid #c3e6cb; padding: 2rem; margin-bottom: 2rem; border-radius: 8px;">
        <h3 style="color: #155724; margin-top: 0;">ğŸ“¤ Exporter toutes les donnÃ©es</h3>
        <p style="color: #155724;">TÃ©lÃ©chargez un fichier contenant toutes vos donnÃ©es</p>
        <button onclick="exporterTout()" style="background: #28a745; padding: 1rem 2rem; font-size: 1.1rem;">
            ğŸ“¥ TÃ©lÃ©charger la sauvegarde complÃ¨te
        </button>
    </div>
    
    <div style="background: #fff3cd; border: 2px solid #ffeaa7; padding: 2rem; border-radius: 8px;">
        <h3 style="color: #856404; margin-top: 0;">ğŸ“‚ Restaurer une sauvegarde</h3>
        <p style="color: #856404;">âš ï¸ <strong>Attention :</strong> Ceci remplacera toutes vos donnÃ©es actuelles !</p>
        <input type="file" id="import-file" accept=".json" style="margin: 1rem 0; padding: 0.5rem;">
        <br>
        <button onclick="importerTout()" style="background: #ffc107; color: #000; padding: 1rem 2rem; font-size: 1.1rem;">
            ğŸ“¤ Restaurer depuis un fichier
        </button>
    </div>
    
    <div style="background: #d1ecf1; border: 2px solid #bee5eb; padding: 1.5rem; margin-top: 2rem; border-radius: 8px;">
        <h3 style="color: #0c5460; margin-top: 0;">â„¹ï¸ Informations</h3>
        <div id="info-sauvegarde" style="color: #0c5460;">
            <p>Statistiques de vos donnÃ©es ici...</p>
        </div>
    </div>
</div>
    
<div style="margin-top: 2rem; padding: 1rem; border-top: 2px solid #eee;">
    <a href="index.html" style="margin-right: 1rem;">ğŸ  Accueil</a>
    <button onclick="location.reload()">ğŸ”„ RafraÃ®chir</button>
</div>

<style>
body { 
    font-family: Arial, sans-serif; 
    padding: 2rem; 
    max-width: 1200px; 
    margin: 0 auto; 
    background: #f5f5f5; 
}

h1 { color: #2c3e50; margin-bottom: 2rem; }
h2 { color: #2c3e50; margin-top: 2rem; }
h3 { color: #34495e; }

.onglets { 
    display: flex; 
    gap: 0.5rem; 
    margin-bottom: 2rem; 
    flex-wrap: wrap; 
}

.onglet { 
    padding: 0.75rem 1.5rem; 
    background: #3498db; 
    color: white; 
    border: none; 
    border-radius: 6px; 
    cursor: pointer; 
    transition: all 0.3s;
    font-size: 0.95rem;
}

.onglet:hover { background: #2980b9; }
.onglet.active { background: #e74c3c; }

.contenu-onglet { 
    display: none; 
    background: white; 
    padding: 2rem; 
    border-radius: 8px; 
    box-shadow: 0 2px 10px rgba(0,0,0,0.1); 
}

.contenu-onglet.active { display: block; }

/* SECTIONS ADMIN */
.section-admin {
    background: #f8f9fa;
    padding: 1.5rem;
    margin: 1.5rem 0;
    border-radius: 8px;
    border-left: 4px solid #3498db;
}

.section-admin h3 {
    color: #2c3e50;
    margin-top: 0;
    margin-bottom: 1rem;
    font-size: 1.2rem;
}

.section-admin label {
    display: block;
    font-weight: 600;
    margin-bottom: 0.5rem;
    color: #34495e;
    font-size: 0.95rem;
}

textarea, input[type="text"] { 
    width: 100%; 
    padding: 0.75rem; 
    margin: 0.5rem 0; 
    border: 2px solid #ddd; 
    border-radius: 6px; 
    font-family: inherit; 
    font-size: 1rem; 
    box-sizing: border-box;
}

textarea:focus, input[type="text"]:focus, select:focus { 
    outline: none; 
    border-color: #3498db; 
    box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1); 
}

button { 
    padding: 0.75rem 1.5rem; 
    background: #27ae60; 
    color: white; 
    border: none; 
    border-radius: 6px; 
    cursor: pointer; 
    margin: 0.5rem; 
    font-size: 1rem; 
    transition: all 0.3s; 
}

button:hover { 
    background: #219a52; 
    transform: translateY(-1px); 
}

.btn-primary {
    background: #e74c3c;
    padding: 1rem 2rem;
    font-size: 1.1rem;
    margin-top: 1rem;
}

.btn-primary:hover {
    background: #c0392b;
}

#message { 
    box-shadow: 0 4px 12px rgba(0,0,0,0.2); 
    font-weight: bold; 
    padding: 1rem 1.5rem;
}

#message.success { 
    background: #d4edda; 
    color: #155724; 
    border: 2px solid #c3e6cb; 
}

#message.error { 
    background: #f8d7da; 
    color: #721c24; 
    border: 2px solid #f5c6cb; 
}

.pdf-item { 
    background: white; 
    padding: 1.5rem; 
    margin: 1rem 0; 
    border-radius: 8px; 
    display: flex; 
    justify-content: space-between; 
    align-items: center; 
    border-left: 5px solid #27ae60;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

.pdf-info { flex: 1; }

.pdf-title { 
    font-size: 1.2rem; 
    font-weight: bold; 
    color: #2c3e50; 
    margin-bottom: 0.5rem; 
}

.pdf-meta {
    color: #7f8c8d;
    font-size: 0.9rem;
    margin-top: 0.5rem;
}

.pdf-category {
    display: inline-block;
    background: #3498db;
    color: white;
    padding: 0.25rem 0.75rem;
    border-radius: 12px;
    font-size: 0.85rem;
    margin-right: 0.5rem;
}

.pdf-actions { 
    display: flex; 
    gap: 0.5rem; 
}

a { 
    color: #3498db; 
    text-decoration: none; 
    padding: 0.5rem 1rem; 
}

a:hover { text-decoration: underline; }

select {
    font-size: 1rem;
}

@media (max-width: 768px) {
    body {
        padding: 1rem;
    }
    
    .onglets {
        flex-direction: column;
    }
    
    .onglet {
        width: 100%;
    }
}
</style>

sgElement.style.display = 'none'; }, 4000);
}<script>
const GRADES = ['1er-dan', '2eme-dan', '3eme-dan', '4eme-dan', '5eme-dan', '6eme-dan'];
const TECHNIQUES = ['1er-dan', '2eme-dan', '3eme-dan', '4-5-6-dan', '20-attaques'];

let gradeActuel = '1er-dan';
let techniqueActuelle = '1er-dan';
let kataActuel = 'nage-no-kata';
let philoActuelle = 'shin-gi-tai';

// ===== INITIALISATION =====
document.addEventListener('DOMContentLoaded', function() {
    initialiserGrades();
    chargerGrade();
    initialiserTechniques();
    afficherTechnique('1er-dan');
    chargerNouveautes();
    chargerToutReglement();
    afficherKata('nage-no-kata');
    afficherPhilo('shin-gi-tai');
    afficherPDFs();
});

// ===== GESTION DES ONGLETS =====
function afficherOnglet(onglet) {
    document.querySelectorAll('.contenu-onglet').forEach(o => o.classList.remove('active'));
    document.querySelectorAll('.onglet').forEach(o => o.classList.remove('active'));
    document.getElementById('onglet-' + onglet).classList.add('active');
    event.target.classList.add('active');
    
    if (onglet === 'pdf') afficherPDFs();
    if (onglet === 'sauvegarde') afficherInfoSauvegarde();
}

// ===== GRADES - NOUVELLE VERSION =====
function initialiserGrades() {
    const container = document.getElementById('grade-selector');
    const labels = {
        '1er-dan': 'ğŸ¥‹ 1er Dan',
        '2eme-dan': 'ğŸ¥‹ 2Ã¨me Dan',
        '3eme-dan': 'ğŸ¥‹ 3Ã¨me Dan',
        '4eme-dan': 'ğŸ“ 4Ã¨me Dan',
        '5eme-dan': 'ğŸ“ 5Ã¨me Dan',
        '6eme-dan': 'ğŸ“ 6Ã¨me Dan'
    };
    
    GRADES.forEach((grade, index) => {
        const btn = document.createElement('button');
        btn.textContent = labels[grade] || grade;
        btn.onclick = () => { 
            gradeActuel = grade; 
            chargerGrade();
            container.querySelectorAll('button').forEach(b => b.style.background = '#27ae60');
            btn.style.background = '#e74c3c';
        };
        container.appendChild(btn);
        
        if (index === 0) btn.style.background = '#e74c3c';
    });
}

function chargerGrade() {
    const data = JSON.parse(localStorage.getItem('grade-complet-' + gradeActuel) || '{}');
    document.getElementById('grade-programme').value = data.programme || '';
    document.getElementById('grade-kata').value = data.kata || '';
    document.getElementById('grade-techniques').value = data.techniques || '';
    document.getElementById('grade-infos').value = data.infos || '';
}

function sauvegarderGradeComplet() {
    const data = {
        programme: document.getElementById('grade-programme').value,
        kata: document.getElementById('grade-kata').value,
        techniques: document.getElementById('grade-techniques').value,
        infos: document.getElementById('grade-infos').value,
        date: new Date().toLocaleDateString('fr-FR')
    };
    
    localStorage.setItem('grade-complet-' + gradeActuel, JSON.stringify(data));
    afficherMessage(`âœ… Toutes les sections du ${gradeActuel} sauvegardÃ©es !`);
}

// ===== TECHNIQUES - NOUVELLE VERSION =====
function initialiserTechniques() {
    const container = document.getElementById('technique-selector');
    const buttons = container.querySelectorAll('button');
    
    buttons.forEach((btn, index) => {
        if (index === 0) btn.style.background = '#e74c3c';
        
        btn.addEventListener('click', function() {
            buttons.forEach(b => b.style.background = index === 4 ? '#e74c3c' : '#3498db');
            this.style.background = '#e74c3c';
        });
    });
}

function afficherTechnique(tech) {
    techniqueActuelle = tech;
    chargerTechnique();
}

function chargerTechnique() {
    const data = JSON.parse(localStorage.getItem('technique-complete-' + techniqueActuelle) || '{}');
    document.getElementById('tech-nage').value = data.nage || '';
    document.getElementById('tech-ne').value = data.ne || '';
    document.getElementById('tech-defense').value = data.defense || '';
    document.getElementById('tech-conseils').value = data.conseils || '';
}

function sauvegarderTechniqueComplete() {
    const data = {
        nage: document.getElementById('tech-nage').value,
        ne: document.getElementById('tech-ne').value,
        defense: document.getElementById('tech-defense').value,
        conseils: document.getElementById('tech-conseils').value,
        date: new Date().toLocaleDateString('fr-FR')
    };
    
    localStorage.setItem('technique-complete-' + techniqueActuelle, JSON.stringify(data));
    afficherMessage(`âœ… Toutes les sections de ${techniqueActuelle} sauvegardÃ©es !`);
}

// ===== KATAS =====
function afficherKata(kata) {
    kataActuel = kata;
    chargerKata();
    document.getElementById('kata-titre').textContent = 'ğŸ“¿ ' + kata;
}

function chargerKata() {
    document.getElementById('kata-text').value = localStorage.getItem('kata-' + kataActuel) || '';
}

function sauvegarderKata() {
    const contenu = document.getElementById('kata-text').value;
    localStorage.setItem('kata-' + kataActuel, contenu);
    afficherMessage('âœ… Kata ' + kataActuel + ' sauvegardÃ© !');
}

// ===== PHILOSOPHIE =====
function afficherPhilo(philo) {
    philoActuelle = philo;
    chargerPhilo();
    document.getElementById('philo-titre').textContent = 'ğŸ§  ' + philo;
}

function chargerPhilo() {
    document.getElementById('philo-text').value = localStorage.getItem('philo-' + philoActuelle) || '';
}

function sauvegarderPhilo() {
    const contenu = document.getElementById('philo-text').value;
    localStorage.setItem('philo-' + philoActuelle, contenu);
    afficherMessage('âœ… Section ' + philoActuelle + ' sauvegardÃ©e !');
}

// ===== NOUVEAUTÃ‰S =====
function chargerNouveautes() {
    document.getElementById('nouveaute-1').value = localStorage.getItem('nouveaute-1-titre') || '';
    document.getElementById('description-1').value = localStorage.getItem('nouveaute-1-desc') || '';
    document.getElementById('nouveaute-2').value = localStorage.getItem('nouveaute-2-titre') || '';
    document.getElementById('description-2').value = localStorage.getItem('nouveaute-2-desc') || '';
}

function sauvegarderNouveautes() {
    localStorage.setItem('nouveaute-1-titre', document.getElementById('nouveaute-1').value);
    localStorage.setItem('nouveaute-1-desc', document.getElementById('description-1').value);
    localStorage.setItem('nouveaute-2-titre', document.getElementById('nouveaute-2').value);
    localStorage.setItem('nouveaute-2-desc', document.getElementById('description-2').value);
    afficherMessage('âœ… NouveautÃ©s sauvegardÃ©es !');
}

// ===== RÃˆGLEMENT =====
function chargerToutReglement() {
    document.getElementById('reglement-general').value = localStorage.getItem('reglement-general') || '';
    document.getElementById('reglement-juges').value = localStorage.getItem('reglement-juges') || '';
    document.getElementById('reglement-criteres').value = localStorage.getItem('reglement-criteres') || '';
    document.getElementById('reglement-procedure').value = localStorage.getItem('reglement-procedure') || '';
    document.getElementById('reglement-nouveautes').value = localStorage.getItem('reglement-nouveautes') || '';
}

function sauvegarderReglementSection(section) {
    const contenu = document.getElementById('reglement-' + section).value;
    localStorage.setItem('reglement-' + section, contenu);
    afficherMessage('âœ… Section rÃ¨glement sauvegardÃ©e !');
}

// ===== PDF =====
function uploaderPDF() {
    const fileInput = document.getElementById('pdf-upload');
    const titreInput = document.getElementById('pdf-titre');
    const descriptionInput = document.getElementById('pdf-description');
    const categorieSelect = document.getElementById('pdf-categorie');
    const file = fileInput.files[0];
    
    if (!file) {
        afficherMessage('âŒ Veuillez sÃ©lectionner un fichier PDF', 'error');
        return;
    }
    if (file.type !== 'application/pdf') {
        afficherMessage('âŒ Le fichier doit Ãªtre un PDF', 'error');
        return;
    }
    if (!titreInput.value.trim()) {
        afficherMessage('âŒ Veuillez donner un titre au document', 'error');
        return;
    }
    
    const reader = new FileReader();
    reader.onload = function(e) {
        try {
            const documents = JSON.parse(localStorage.getItem('documentsData') || '[]');
            
            documents.push({
                title: titreInput.value.trim(),
                filename: file.name,
                description: descriptionInput.value.trim() || 'Aucune description',
                category: categorieSelect.value,
                uploadDate: new Date().toISOString(),
                fileData: e.target.result,
                fileSize: file.size
            });
            
            localStorage.setItem('documentsData', JSON.stringify(documents));
            
            afficherMessage('âœ… Document uploadÃ© avec succÃ¨s !');
            
            fileInput.value = '';
            titreInput.value = '';
            descriptionInput.value = '';
            categorieSelect.value = 'reglement-general';
            
            afficherPDFs();
        } catch (error) {
            afficherMessage('âŒ Erreur: ' + error.message, 'error');
        }
    };
    
    reader.readAsDataURL(file);
}

function afficherPDFs() {
    const documents = JSON.parse(localStorage.getItem('documentsData') || '[]');
    const liste = document.getElementById('liste-pdf');
    
    if (documents.length === 0) {
        liste.innerHTML = `
            <div style="padding: 2rem; text-align: center; background: #f8f9fa; border-radius: 8px; border: 2px dashed #ddd;">
                <p style="font-size: 1.2rem; color: #999; margin: 0;">ğŸ“­ Aucun document disponible</p>
                <p style="color: #999; margin-top: 0.5rem;">Uploadez votre premier document ci-dessus</p>
            </div>
        `;
        return;
    }
    
    const categorieLabels = {
        'reglement-general': 'ğŸ“œ RÃ¨glement GÃ©nÃ©ral',
        'juges-arbitres': 'ğŸ‘” Juges & Arbitres',
        'criteres-notation': 'âœ… CritÃ¨res de Notation',
        'procedures': 'âš™ï¸ ProcÃ©dures',
        'nouveautes': 'â­ NouveautÃ©s',
        'autres': 'ğŸ“ Autres'
    };
    
    liste.innerHTML = '<h3 style="margin-bottom: 1rem;">ğŸ“‹ Documents disponibles :</h3>' + 
        documents.map((doc, index) => {
            const categorieLabel = categorieLabels[doc.category] || doc.category;
            const dateObj = new Date(doc.uploadDate);
            const dateFormatee = dateObj.toLocaleDateString('fr-FR');
            const tailleFormatee = (doc.fileSize / 1024 / 1024).toFixed(2) + ' Mo';
            
            return `
            <div class="pdf-item">
                <div class="pdf-info">
                    <div class="pdf-title">ğŸ“„ ${doc.title}</div>
                    <div style="color: #555; margin: 0.5rem 0;">${doc.description}</div>
                    <div class="pdf-meta">
                        <span class="pdf-category">${categorieLabel}</span>
                        <span>ğŸ“… ${dateFormatee}</span>
                        <span style="margin-left: 1rem;">ğŸ’¾ ${tailleFormatee}</span>
                    </div>
                </div>
                <div class="pdf-actions">
                    <a href="${doc.fileData}" download="${doc.filename}" 
                       style="background: #3498db; color: white; padding: 0.5rem 1rem; border-radius: 6px; text-decoration: none;">
                        ğŸ“¥ TÃ©lÃ©charger
                    </a>
                    <button onclick="supprimerDocument(${index})" 
                            style="background: #e74c3c; padding: 0.5rem 1rem; font-size: 0.9rem;">
                        ğŸ—‘ï¸ Supprimer
                    </button>
                </div>
            </div>
        `}).join('');
}

function supprimerDocument(index) {
    if (confirm("âš ï¸ Supprimer dÃ©finitivement ce document ?")) {
        const documents = JSON.parse(localStorage.getItem('documentsData') || '[]');
        documents.splice(index, 1);
        localStorage.setItem('documentsData', JSON.stringify(documents));
        afficherPDFs();
        afficherMessage('âœ… Document supprimÃ©.');
    }
}

// ===== SAUVEGARDE =====
function afficherInfoSauvegarde() {
    const info = document.getElementById('info-sauvegarde');
    
    let nbGrades = 0;
    let nbTechniques = 0;
    let nbKatas = 0;
    let nbPhilo = 0;
    
    GRADES.forEach(grade => {
        if (localStorage.getItem('grade-complet-' + grade)) nbGrades++;
    });
    
    TECHNIQUES.forEach(tech => {
        if (localStorage.getItem('technique-complete-' + tech)) nbTechniques++;
    });
    
    ['nage-no-kata', 'katame-no-kata', 'kime-no-kata', 'goshin-jitsu', 'ju-no-kata', 'itsutsu-no-kata', 'koshiki-no-kata', 'gonosen'].forEach(kata => {
        if (localStorage.getItem('kata-' + kata)) nbKatas++;
    });
    
    ['shin-gi-tai', 'ethique', 'principes', 'histoire'].forEach(philo => {
        if (localStorage.getItem('philo-' + philo)) nbPhilo++;
    });
    
    const documents = JSON.parse(localStorage.getItem('documentsData') || '[]');
    
    let tailleTotal = 0;
    for (let key in localStorage) {
        if (localStorage.hasOwnProperty(key)) {
            tailleTotal += localStorage[key].length + key.length;
        }
    }
    const tailleMo = (tailleTotal / 1024 / 1024).toFixed(2);
    
    info.innerHTML = `
        <p><strong>ğŸ“Š Statistiques actuelles :</strong></p>
        <ul>
            <li>ğŸ¥‹ Grades complets : ${nbGrades} / 6</li>
            <li>ğŸ’ª Techniques complÃ¨tes : ${nbTechniques} / 5</li>
            <li>ğŸ“¿ Katas : ${nbKatas} / 8</li>
            <li>ğŸ§  Philosophie : ${nbPhilo} / 4</li>
            <li>ğŸ“„ Documents PDF : ${documents.length}</li>
        </ul>
        <p><strong>ğŸ’¾ Taille totale :</strong> ${tailleMo} Mo</p>
    `;
}

function exporterTout() {
    try {
        const sauvegarde = {
            version: '2.0',
            date: new Date().toISOString(),
            site: 'grades-judo',
            donnees: {}
        };
        
        for (let key in localStorage) {
            if (localStorage.hasOwnProperty(key)) {
                sauvegarde.donnees[key] = localStorage[key];
            }
        }
        
        const json = JSON.stringify(sauvegarde, null, 2);
        const blob = new Blob([json], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        
        const date = new Date();
        const nomFichier = `grades-judo-backup-${date.getFullYear()}-${String(date.getMonth()+1).padStart(2,'0')}-${String(date.getDate()).padStart(2,'0')}.json`;
        
        const a = document.createElement('a');
        a.href = url;
        a.download = nomFichier;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
        
        afficherMessage('âœ… Sauvegarde tÃ©lÃ©chargÃ©e : ' + nomFichier);
    } catch (error) {
        afficherMessage('âŒ Erreur export: ' + error.message, 'error');
    }
}

function importerTout() {
    const fileInput = document.getElementById('import-file');
    const file = fileInput.files[0];
    
    if (!file) {
        afficherMessage('âŒ Veuillez sÃ©lectionner un fichier', 'error');
        return;
    }
    
    if (!confirm('âš ï¸ ATTENTION !\n\nCette opÃ©ration va REMPLACER toutes vos donnÃ©es actuelles.\n\nContinuer ?')) {
        return;
    }
    
    const reader = new FileReader();
    
    reader.onload = function(e) {
        try {
            const sauvegarde = JSON.parse(e.target.result);
            
            if (!sauvegarde.donnees) {
                throw new Error('Format invalide');
            }
            
            localStorage.clear();
            
            let compteur = 0;
            for (let key in sauvegarde.donnees) {
                localStorage.setItem(key, sauvegarde.donnees[key]);
                compteur++;
            }
            
            afficherMessage('âœ… Sauvegarde restaurÃ©e ! ' + compteur + ' Ã©lÃ©ments importÃ©s.');
            
            setTimeout(() => location.reload(), 2000);
        } catch (error) {
            afficherMessage('âŒ Erreur import: ' + error.message, 'error');
        }
    };
    
    reader.readAsText(file);
}

// ===== MESSAGES =====
function afficherMessage(message, type = 'success') {
    const msgElement = document.getElementById('message');
    msgElement.textContent = message;
    msgElement.className = type;
    msgElement.style.display = 'block';
    setTimeout(() => { 
        msgElement.style.display = 'none'; 
    }, 4000);
}

// ===== INITIALISATION =====
document.addEventListener('DOMContentLoaded', function() {
    console.log('ğŸ”§ Admin chargÃ©');
    
    // Charger le premier grade
    chargerGradeComplet('1er-dan');
    
    // Charger la premiÃ¨re technique
    afficherTechnique('1er-dan');
    
    // Charger le premier kata
    afficherKata('nage-no-kata');
    
    // Charger la premiÃ¨re philo
    afficherPhilo('shin-gi-tai');
    
    // Charger le rÃ¨glement
    chargerReglement();
    
    // Charger les nouveautÃ©s
    chargerNouveautes();
    
    // Charger les PDFs
    afficherPDFs();
    
    // Afficher les infos de sauvegarde
    afficherInfoSauvegarde();
    
    // Afficher l'onglet Grades par dÃ©faut
    afficherOnglet('grades');
    
    console.log('âœ… Initialisation admin terminÃ©e');
});
</script>

<style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #f0f2f5;
    padding: 1rem;
}

h1 {
    text-align: center;
    color: #2c3e50;
    margin-bottom: 2rem;
    font-size: 2rem;
}

.onglets {
    display: flex;
    gap: 0.5rem;
    margin-bottom: 2rem;
    flex-wrap: wrap;
    justify-content: center;
}

.onglet {
    padding: 0.75rem 1.5rem;
    background: white;
    border: 2px solid #ddd;
    border-radius: 8px;
    cursor: pointer;
    font-size: 1rem;
    transition: all 0.3s;
}

.onglet:hover {
    background: #3498db;
    color: white;
    border-color: #3498db;
}

.onglet.active {
    background: #2c3e50;
    color: white;
    border-color: #2c3e50;
}

.contenu-onglet {
    display: none;
    background: white;
    padding: 2rem;
    border-radius: 12px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

.contenu-onglet.active {
    display: block;
}

.section-admin {
    margin-bottom: 2rem;
    padding: 1.5rem;
    background: #f8f9fa;
    border-radius: 8px;
    border-left: 4px solid #3498db;
}

.section-admin h3 {
    color: #2c3e50;
    margin-bottom: 1rem;
    font-size: 1.3rem;
}

.section-admin label {
    display: block;
    margin-bottom: 0.5rem;
    color: #555;
    font-weight: 500;
}

textarea {
    width: 100%;
    padding: 1rem;
    border: 2px solid #ddd;
    border-radius: 6px;
    font-size: 1rem;
    font-family: 'Courier New', monospace;
    resize: vertical;
    transition: border-color 0.3s;
}

textarea:focus {
    outline: none;
    border-color: #3498db;
}

.btn-primary {
    background: #27ae60;
    color: white;
    padding: 1rem 2rem;
    border: none;
    border-radius: 8px;
    font-size: 1.1rem;
    cursor: pointer;
    transition: background 0.3s;
    display: block;
    margin: 2rem auto 0;
}

.btn-primary:hover {
    background: #229954;
}

#message {
    padding: 1rem 1.5rem;
    border-radius: 8px;
    font-weight: bold;
}

#message.success {
    background: #d4edda;
    color: #155724;
    border: 1px solid #c3e6cb;
}

#message.error {
    background: #f8d7da;
    color: #721c24;
    border: 1px solid #f5c6cb;
}

.pdf-item {
    padding: 1.5rem;
    background: #f8f9fa;
    border-radius: 8px;
    margin-bottom: 1rem;
    border: 1px solid #ddd;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.pdf-info {
    flex: 1;
}

.pdf-title {
    font-size: 1.1rem;
    font-weight: bold;
    color: #2c3e50;
    margin-bottom: 0.5rem;
}

.pdf-meta {
    color: #666;
    font-size: 0.9rem;
}

.pdf-category {
    background: #3498db;
    color: white;
    padding: 0.25rem 0.75rem;
    border-radius: 12px;
    font-size: 0.85rem;
    margin-right: 1rem;
}

.pdf-actions {
    display: flex;
    gap: 0.5rem;
}

button {
    background: #3498db;
    color: white;
    padding: 0.75rem 1.5rem;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 1rem;
    transition: background 0.3s;
}

button:hover {
    background: #2980b9;
}
</style>

</body>
</html>